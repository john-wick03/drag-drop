<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Question Layouts</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container mt-5">
        <h2>What do you find most important at work?</h2>
        
        <form id="questionForm" onsubmit="return handleSubmit(event)">
            <div class="mt-3">
                <ul>
                    <li class="option btn rounded-4 border-secondary fw-bold m-2" id="option1" draggable="true">
                        <span class="rounded-4 px-2 text-white">1</span> Salary
                    </li>
                    <li class="option btn rounded-4 border-secondary fw-bold m-2" id="option2" draggable="true">
                        <span class="rounded-4 px-2 text-white">2</span> Working & development
                    </li>
                    <li class="option btn rounded-4 border-secondary m-2 fw-bold" id="option3" draggable="true">
                        <span class="rounded-4 px-2 text-white">3</span> Benefits
                    </li>
                    <li class="option btn rounded-4 border-secondary fw-bold m-2" id="option4" draggable="true">
                        <span class="rounded-4 px-2 text-white">4</span> Remote Work
                    </li> <br>
                    <li class="option btn rounded-4 border-secondary fw-bold m-2" id="option5" draggable="true">
                        <span class="rounded-4 px-2 text-white">5</span> Location
                    </li>
                    <li class="option btn rounded-4 border-secondary fw-bold m-2" id="option6" draggable="true">
                        <span class="rounded-4 px-2 text-white">6</span> Work atmosphere
                    </li>
                </ul>
            </div>

            <div class="mt-3 row g-3">
                <div class="col-12 col-lg-4">
                    <div class="border border-dark-subtle rounded-3">
                        <h6 class="important text-center p-3 rounded-top-3">Important</h6>
                        <div class="blank text-center fw-bold" style="height: 5rem;" ondragover="allowDrop(event)"
                            ondrop="drop(event, 0)" onclick="handleClick(0)"></div>
                    </div>
                </div>
                <div class="col-12 col-lg-4">
                    <div class="border border-dark-subtle rounded-3">
                        <h6 class="important text-center p-3 rounded-top-3">Not Important</h6>
                        <div class="blank text-center fw-bold" style="height: 5rem;" ondragover="allowDrop(event)"
                            ondrop="drop(event, 1)" onclick="handleClick(1)"></div>
                    </div>
                </div>
            </div>

            <div id="error-msg" class="text-danger mt-3"></div>

            <button type="submit" class="rounded-3 submit mt-3">Submit</button>
        </form>

        <div class="mt-4">
            <h4>Selected Options:</h4>
            <p><strong>Important:</strong> <span id="important-array" class="array"></span></p>
            <p><strong>Not Important:</strong> <span id="not-important-array" class="array"></span></p>
        </div>
    </div>

    <script>
        const options = document.querySelectorAll('.option');
        const blanks = document.querySelectorAll('.blank');
        let activeOption = null;

        // Array to store selected options in each blank
        let selectedOptions = [[], []];

        function allowDrop(event) {
            event.preventDefault();
        }

        function drop(event, index) {
            const optionId = event.dataTransfer.getData('text/plain');
            const option = document.getElementById(optionId);
            if (option) {
                addOptionToBlank(option, index);
            }
        }

        // Handle click event
        function handleClick(index) {
            if (activeOption) {
                addOptionToBlank(activeOption, index);
                activeOption = null;
            }
        }

        // Add the option to the blank area
        function addOptionToBlank(option, index) {
            blankOptionStyle();
            const optionText = option.textContent.trim();
            if (!selectedOptions[index].includes(optionText)) {
                blanks[index].textContent += optionText + ", ";
                selectedOptions[index].push(optionText);
                option.style.display = 'none';
            }
        }

        // Reset styles of all options
        function resetOptionStyles() {
            options.forEach(option => {
                option.style.backgroundColor = '';
                option.style.color = '';
            });
        }

        // Blank option style
        function blankOptionStyle() {
            blanks.forEach(option => {
                option.classList.add('in-blank');
            });
        }

        // Handle drag start
        options.forEach(option => {
            option.addEventListener('dragstart', (event) => {
                event.dataTransfer.setData('text/plain', option.id);
            });

            // Handle click to select option for clicking method
            option.addEventListener('click', () => {
                resetOptionStyles();
                activeOption = option;
                option.style.backgroundColor = 'rgba(99, 135, 218, 0.403)';
                option.style.color = 'white';
            });
        });

        // Handle double-click to return one option at a time
        blanks.forEach((blank, index) => {
            blank.addEventListener('dblclick', () => {
                const optionsText = blank.textContent.split(', ').filter(text => text);

                if (optionsText.length > 0) {
                    const lastOptionText = optionsText.pop();
                    const optionToReturn = Array.from(options).find(option => option.textContent.trim() === lastOptionText);

                    if (optionToReturn) {
                        optionToReturn.style.display = "inline-block";
                        optionToReturn.style.backgroundColor = '';
                        optionToReturn.style.color = '';
                    }

                    // Update the blank's text content after removing the last option
                    blank.textContent = optionsText.join(', ') + (optionsText.length > 0 ? ', ' : '');
                    selectedOptions[index].pop(); 
                }
            });
        });

        // Handle form submission
        function handleSubmit(event) {
            event.preventDefault(); 
            const errorMsg = document.getElementById('error-msg');
            const importantArray = document.getElementById('important-array');
            const notImportantArray = document.getElementById('not-important-array');

            errorMsg.textContent = ''; 
            if (selectedOptions[0].length === 0 || selectedOptions[1].length === 0) {
                errorMsg.textContent = 'Error: Both "Important" and "Not Important" sections must have at least one option.';
                return false; 
            }

            importantArray.textContent = selectedOptions[0];
            notImportantArray.textContent = selectedOptions[1];

        }
    </script>
</body>

</html>
